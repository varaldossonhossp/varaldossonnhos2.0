<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- ============================================================
       üíô VARAL DOS SONHOS ‚Äî Carrinho de Ado√ß√£o
       ------------------------------------------------------------
       Exibe as cartinhas selecionadas e permite finalizar a ado√ß√£o.
       Integra com /api/adocoes.js ‚Üí cria registro no Airtable e envia
       e-mail de confirma√ß√£o ao administrador.
       100% compat√≠vel com: Airtable, Vercel, .NET MAUI e EmailJS.
  ============================================================ -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Finalize sua ado√ß√£o e espalhe sonhos com amor üíô" />
  <title>Carrinho | Fant√°stica F√°brica de Sonhos</title>

  <!-- üé® Estilos globais -->
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/cloudinho.css" />
  <link rel="stylesheet" href="../css/carrinho.css" />
  <link rel="icon" href="../imagens/favicon.png" type="image/png" />
</head>

<body class="bg-gradiente">
  <!-- ============================================================
       üîù Cabe√ßalho din√¢mico (carregado via componentes.js)
  ============================================================ -->
  <div id="header"></div>

  <!-- ============================================================
       üõçÔ∏è Conte√∫do principal ‚Äî Carrinho de Ado√ß√£o
  ============================================================ -->
  <main class="container-carrinho">
    <section class="card-carrinho">
      <h1>üíô Carrinho de Ado√ß√£o</h1>
      <p>Revise suas informa√ß√µes antes de finalizar a ado√ß√£o da cartinha.</p>

      <!-- Cartinha selecionada -->
      <div id="cartinha-selecionada" class="cartinha-selecionada">
        <img id="img-cartinha" src="../imagens/cartinha-placeholder.png" alt="Cartinha selecionada" />
        <div>
          <h3 id="nome-crianca">Nome da Crian√ßa</h3>
          <p id="sonho-crianca">Sonho: (a ser preenchido dinamicamente)</p>
        </div>
      </div>

      <!-- Escolha do ponto de coleta -->
      <div class="campo">
        <label for="select-ponto">üì¶ Ponto de Coleta:</label>
        <select id="select-ponto" required>
          <option value="" selected disabled>Selecione um ponto...</option>
          <option value="Ponto Central">Ponto Central</option>
          <option value="Ponto Norte">Ponto Norte</option>
          <option value="Ponto Sul">Ponto Sul</option>
        </select>
      </div>

      <!-- Bot√£o de finaliza√ß√£o -->
      <button id="btn-finalizar" class="btn-finalizar">
        ‚ú® Finalizar Ado√ß√£o
      </button>
    </section>
  </main>

  <!-- ============================================================
       ‚òÅÔ∏è Cloudinho (assistente) e Rodap√©
  ============================================================ -->
  <div id="footer"></div>
  <div id="cloudinho"></div>

  <!-- ============================================================
       üìú Scripts din√¢micos ‚Äî Componentes + L√≥gica do Carrinho
  ============================================================ -->
  <script>
    // Carrega header/footer/cloudinho dinamicamente
    async function carregarComponente(id, arquivo) {
      const base = "../componentes/";
      const resp = await fetch(base + arquivo);
      if (resp.ok) document.getElementById(id).innerHTML = await resp.text();
    }
    carregarComponente("header", "header.html");
    carregarComponente("footer", "footer.html");
    carregarComponente("cloudinho", "cloudinho.html");
  </script>

  <script src="../js/cloudinho.js"></script>
  <script src="../js/carrinho.js"></script>

  <!-- ============================================================
       üß† Script de preenchimento autom√°tico (dados da cartinha)
  ============================================================ -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const nome = localStorage.getItem("nome_crianca");
      const sonho = localStorage.getItem("sonho");
      const img = localStorage.getItem("imagem_cartinha");

      if (nome) document.getElementById("nome-crianca").textContent = nome;
      if (sonho) document.getElementById("sonho-crianca").textContent = "üéÅ Sonho: " + sonho;
      if (img) document.getElementById("img-cartinha").src = img;
    });
  </script>
</body>
</html>
